<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ===================== Colors ===================== -->
    <Color x:Key="PrimaryColor">#FF4E89AE</Color>
    <Color x:Key="PrimaryDarkColor">#FF2F5D73</Color>
    <Color x:Key="AccentColor">#FFF9A620</Color>
    <Color x:Key="BackgroundColor">#FFF4F7FB</Color>
    <Color x:Key="SurfaceColor">#FFFFFFFF</Color>
    <Color x:Key="BorderColor">#FFE1E5EE</Color>
    <Color x:Key="DangerColor">#FFE57373</Color>

    <!-- ===================== Brushes ==================== -->
    <SolidColorBrush x:Key="PrimaryBrush"      Color="{StaticResource PrimaryColor}" />
    <SolidColorBrush x:Key="PrimaryDarkBrush"  Color="{StaticResource PrimaryDarkColor}" />
    <SolidColorBrush x:Key="AccentBrush"       Color="{StaticResource AccentColor}" />
    <SolidColorBrush x:Key="BackgroundBrush"   Color="{StaticResource BackgroundColor}" />
    <SolidColorBrush x:Key="SurfaceBrush"      Color="{StaticResource SurfaceColor}" />
    <SolidColorBrush x:Key="BorderBrush"       Color="{StaticResource BorderColor}" />
    <SolidColorBrush x:Key="DangerBrush"       Color="{StaticResource DangerColor}" />

    <!-- ============ Global defaults (Window) ============ -->
    <Style TargetType="Window">
        <Setter Property="Background"  Value="{StaticResource BackgroundBrush}" />
        <Setter Property="Foreground"  Value="#FF273C4E" />
        <Setter Property="FontFamily"  Value="Segoe UI" />
        <Setter Property="FontSize"    Value="14" />
    </Style>

    <!-- ============ Button ============================== -->
    <Style TargetType="Button">
        <Setter Property="Margin"            Value="0,8,0,0" />
        <Setter Property="Padding"           Value="14,8" />
        <Setter Property="Background"        Value="{StaticResource PrimaryBrush}" />
        <Setter Property="Foreground"        Value="White" />
        <Setter Property="BorderBrush"       Value="{StaticResource PrimaryDarkBrush}" />
        <Setter Property="BorderThickness"   Value="0" />
        <Setter Property="FontWeight"        Value="SemiBold" />
        <Setter Property="Cursor"            Value="Hand" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  CornerRadius="14"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter HorizontalAlignment="Center"
                              VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource AccentBrush}" />
                            <Setter Property="Foreground" Value="#FF263238" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryDarkBrush}" />
                            <Setter Property="Foreground" Value="White" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="border" Property="Background" Value="#FFD8DEE9" />
                            <Setter Property="Foreground" Value="#FF98A1B2" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ============ TextBox ============================= -->
    <Style TargetType="TextBox">
        <Setter Property="Margin"            Value="0,8,0,0" />
        <Setter Property="Padding"           Value="12" />
        <Setter Property="Background"        Value="{StaticResource SurfaceBrush}" />
        <Setter Property="BorderBrush"       Value="{StaticResource BorderBrush}" />
        <Setter Property="BorderThickness"   Value="1" />
        <Setter Property="Foreground"        Value="#FF273C4E" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  CornerRadius="10">
                        <ScrollViewer x:Name="PART_ContentHost" Margin="0" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="border" Property="BorderBrush"     Value="{StaticResource PrimaryBrush}" />
                            <Setter TargetName="border" Property="BorderThickness" Value="2" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="border" Property="Opacity" Value="0.7" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ============ PasswordBox ========================= -->
    <Style TargetType="PasswordBox">
        <Setter Property="Margin"            Value="0,8,0,0" />
        <Setter Property="Padding"           Value="12" />
        <Setter Property="Background"        Value="{StaticResource SurfaceBrush}" />
        <Setter Property="BorderBrush"       Value="{StaticResource BorderBrush}" />
        <Setter Property="BorderThickness"   Value="1" />
        <Setter Property="Foreground"        Value="#FF273C4E" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="PasswordBox">
                    <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  CornerRadius="10">
                        <ScrollViewer x:Name="PART_ContentHost" Margin="0" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="border" Property="BorderBrush"     Value="{StaticResource PrimaryBrush}" />
                            <Setter TargetName="border" Property="BorderThickness" Value="2" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="border" Property="Opacity" Value="0.7" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ======= ComboBox arrow template (đặt TRƯỚC style) ======= -->
    <ControlTemplate x:Key="ComboBoxToggleButton" TargetType="ToggleButton">
        <Border x:Name="border"
            Background="Transparent"
            Padding="0"
            Margin="0"
            BorderThickness="0"
            HorizontalAlignment="Right">
            <Path x:Name="arrow"
            Data="M 0 0 L 4 4 L 8 0 Z"
            Fill="{StaticResource PrimaryBrush}"
            Stretch="Uniform"
            Margin="0,0,10,0" />
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="arrow" Property="Fill" Value="{StaticResource AccentBrush}" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter TargetName="arrow" Property="Fill" Value="{StaticResource PrimaryDarkBrush}" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- ============ ComboBox ============================ -->
    <Style TargetType="ComboBox">
        <Setter Property="Margin"          Value="0,8,0,0" />
        <Setter Property="Padding"         Value="10" />
        <Setter Property="Background"      Value="{StaticResource SurfaceBrush}" />
        <Setter Property="BorderBrush"     Value="{StaticResource BorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBox">
                    <Grid>
                        <Border x:Name="border"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="10" />
                        <ToggleButton Name="toggle"
                          Grid.Column="2"
                          Template="{StaticResource ComboBoxToggleButton}"
                          Focusable="False"
                          IsChecked="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                          ClickMode="Press" />
                        <ContentPresenter Margin="6,4,25,4"
                              HorizontalAlignment="Left"
                              VerticalAlignment="Center"
                              Content="{TemplateBinding SelectionBoxItem}" />
                        <Popup x:Name="Popup"
                   Placement="Bottom"
                   IsOpen="{TemplateBinding IsDropDownOpen}"
                   AllowsTransparency="True"
                   Focusable="False">
                            <Border Margin="0,4,0,0"
                      Background="{StaticResource SurfaceBrush}"
                      BorderBrush="{StaticResource BorderBrush}"
                      BorderThickness="1"
                      CornerRadius="12">
                                <ScrollViewer Margin="4"
                              SnapsToDevicePixels="True">
                                    <ItemsPresenter />
                                </ScrollViewer>
                            </Border>
                        </Popup>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="border" Property="BorderBrush"     Value="{StaticResource PrimaryBrush}" />
                            <Setter TargetName="border" Property="BorderThickness" Value="2" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ============ ListBox ============================= -->
    <Style TargetType="ListBox">
        <Setter Property="Background"      Value="{StaticResource SurfaceBrush}" />
        <Setter Property="BorderBrush"     Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding"         Value="6" />
    </Style>

    <!-- ============ ListBoxItem ========================= -->
    <Style TargetType="ListBoxItem">
        <Setter Property="Margin"          Value="0,4" />
        <Setter Property="Padding"         Value="10" />
        <Setter Property="Background"      Value="Transparent" />
        <Setter Property="BorderBrush"     Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Cursor"          Value="Hand" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  CornerRadius="8"
                  Padding="10">
                        <ContentPresenter />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="Background" Value="#FFE9EEF7" />
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryBrush}" />
                            <Setter Property="Foreground" Value="White" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
